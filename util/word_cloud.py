#coding=utf-8
import random
import jieba
from PIL import Image
import numpy as np
from matplotlib import pyplot as plt
from wordcloud import WordCloud, STOPWORDS


def getCommentsImage(text):
    # 分词
    cut = jieba.cut(text)  # 切割词语
    strings = ' '.join(cut)  # 空格链接词语
    img = Image.open('../static/image/333.png')
    img_arr = np.array(img)
    wc = WordCloud(
        background_color=None,  # 背景
        mask=img_arr,
        mode='RGBA',
        stopwords=STOPWORDS.add('景区'),
        font_path='../static/font/font_1.ttf'
    )
    wc.generate_from_text(strings)
    # 绘制图片
    flg = plt.figure(1)
    plt.imshow(wc)  # 显示词云
    plt.axis('off')  # 关闭x,y轴
    plt.show()  # 显示
    randomInt = random.randint(1, 100000)
    plt.savefig(f'./{randomInt}.png')  # 保存词云图
    # return f'../word_cloud_image/{randomInt}.jpg'


def getCommentsImage_s(comments):
    text = ''
    for i in comments:
        text = text + i['comment_content']
    # 分词
    cut = jieba.cut(text)
    strings = ' '.join(cut)
    img = Image.open('./static/image/111.jpg')
    img_arr = np.array(img)
    wc = WordCloud(
        background_color=None,  # 背景
        mask=img_arr,
        mode='RGBA',
        stopwords=STOPWORDS.add('景区'),
        font_path='./static/font/font_1.ttf'
    )
    wc.generate_from_text(strings)
    # 绘制图片
    flg = plt.figure(1)
    plt.imshow(wc)
    plt.axis('off')

    randomInt = random.randint(1, 100000)
    plt.savefig(f'./static/image/{randomInt}.png')
    return f'./static/image/{randomInt}.png'


if __name__ == '__main__':
    STOPWORDS.add('特色')
    STOPWORDS.add('景区')
    text = ['深圳世界之窗深圳欢乐谷深圳锦绣中华民俗村东部华侨城大侠谷海上田园深圳野生动物园杨梅坑深圳青青世界观澜山水田园旅游文化园深圳光明农场大观园东部华侨城欢乐港湾∙湾区之光摩天轮大鹏所城地王观光·深港之窗玫瑰海岸文化旅游度假区金色海岸游船深圳欢乐海岸海洋奇梦馆深圳平安金融中心云际观光层观澜海洋世界较场尾二十四史书院中丝园大梅沙愿望塔·深海幻境深圳欢乐海岸深蓝秘境焰火水影秀观澜湖旅游度假区观澜湖生态运动公社招商蛇口邮轮母港世界之窗阿尔卑斯冰雪世界求水山龙之谷深圳文博宫甘坑古镇深圳观光巴士深圳光明滑草游乐园茵特拉根养生温泉深圳九龙生态园侏罗纪冰雪世界（横岗店）深圳玫瑰小镇春江游乐求水山景区游乐场哈特曼航空体验馆云里梦想乐园深圳失恋博物馆（东门老街旗舰店）东门老街深圳独角兽星空艺术馆奇思妙想减压馆贝尔自然探索乐园冰纷万象滑冰场观澜山水田园汤泉深圳大梅沙湾游艇会小凉帽飞雪乐园求水山景区尼克Playtime乐园深圳小泥巴营地西涌滨海旅游度假区奈尔宝家庭中心(深圳宝安店)深圳东部通航直升机/跳伞（盐田店）深圳可拉熊丛林探险营地野恩动物乐园深圳不可思议减压馆祥山艺术馆大湾区一号深圳不可思议运动街区蛇口金龟露营小镇海上彩虹号meland club(壹方城店)华南首展-国家地理经典影像大展teamLab共创未来园沙井京基百纳奇幻冰雪世界大鹏湾游艇欢乐海岸老虎沟生态农场深圳百师园深圳东部冰雪创新城深圳东部通航直升机/跳伞（大中华店）源野探险乐园景区大湾区GBA Golf高尔夫俱乐部新天地生态农场华侨城大鹏旅游区求水山水上乐园博春藤儿童拓展大树农场海语沙林团建营地畅游力高乐园meland(深圳前海欢乐港湾店)meland club(万象天地店)meland club(深业上城店)meland club(龙华壹方天地店)大筒仓THE SILOS深圳悬幻玻璃艺术馆（海岸城店）凤凰山田中园野炊·拓展基地华澜生态艺术研学社《欢聚！加倍！CELEBRATE MORE!》弗洛伦泰因·霍夫曼个展华南首展圆明新园广州动物园宝墨园·南粤苑广州中山纪念堂广州市越秀公园白水寨风景名胜区中央电视台南海影视城广州长隆野生动物世界海珠湖南风古灶广州长隆欢乐世界观音山旅游风景区大亚湾黄金海岸广东罗浮山风景名胜区中山詹园香市动物园广州长隆国际大马戏广州塔广东圆玄道观珠海长隆海洋王国肇庆鼎湖山景区广州长隆飞鸟乐园隐贤山庄华南植物园松山湖生态景区（松湖烟雨）汕尾铜鼎山旅游区开平碉楼文化旅游区广东科学中心岭南印象园长鹿旅游休博园千年瑶寨西樵山风景名胜区肇庆七星岩景区洞天仙境高明盈香生态园龙凤山庄影视度假村南沙天后宫自力村碉楼群台山川岛旅游度假区碧水湾温泉双月湾观景台百万葵园海珠国家湿地公园立园连州地下河古龙峡玻璃大峡谷－云天玻霸那琴半岛地质海洋公园大亚湾星高度梦想乐园香港迪士尼乐园南粤苑中山影视城观音山游乐场古龙峡瀑布群万绿湖风景区珠江夜游广州塔财富码头广东第一峰海滨温泉度假区九龙湖生态公园粤晖园黄腾峡天门悬廊长洲岛都市农业公园梦幻百花洲故乡里民俗文化村广州二龙山花园增城区正果老街景区南昆山云顶温泉新银盏温泉度假村天适樱花悠乐园迪茵湖生态旅游度假区聚龙湾天然温泉度假村锦江温泉惠州西湖台山康桥温泉古兜温泉小镇葵博园龙门铁泉江南宋城历史文化旅游区五矿哈施塔特文旅小镇余荫山房白云山风景名胜区广州长隆旅游度假区锦江里碉楼群森波拉奇妙世界湟川三峡顺德欢乐海岸PLUS天人山水大地艺术园广州脱单便利店河源叶园温泉盛花谷宝晶宫国际旅游度假区外伶仃岛满屋世界迷你梦幻乐园广东大虫生态动物乐园滨海湾·花海里亲子乐园广东赤坎古镇星湖风景名胜区肇庆星湖湿地公园清远市禾雀花基地三桠塘幽谷南昆山温泉大观园巽寮湾清远笔架山旅游区阿农湾农耕文化园珠海御温泉黄龙岩畲族风情旅游区正佳广场商贸旅游区陈家祠石头记矿物园珠江夜游海心沙东区码头正佳科学馆奥咖HOKA光影剧场下川岛王府洲旅游度假区佛山市祖庙博物馆荷花奇境（三水荷花世界）长廊生态园李小龙乐园国医小镇广东航天农业科技生态园西樵山国艺影视城泰康山生态旅游度假区桂山大峡谷漂流巴伐利亚庄园客天下国际旅游度假区河源御临门温泉度假村客天下水晶温泉太平山顶黄腾峡漂流佛冈森波拉火山温泉清远金子山原生态旅游风景区玄真漂流广东第一峰温泉度假村黄腾峡生态旅游区鳄鱼岛德庆盘龙峡景区珠海长隆国际大马戏广州飞越丛林探险乐园香港海洋公园塘厦欢乐田园澳门环岛游星奇塔无动力世界丹凤谷景区南海湾森林生态园浈阳峡文化旅游度假区香港故宫文化博物馆乐民海洋世界澳门塔珠江夜游天字码头野趣沟1978电影小镇增江游船一方乐田都市农园中山泉眼温泉有戏世界沉浸式互动影城顺德风情蜡像馆永记生态园小怪兽亲子乐园万绿谷番禺欢乐森林中山温泉广州融创乐园小鸟天堂马头山风景区天龙溪河源佗城珠江夜游广州塔·中大码头东莞梵高星空艺术馆牛仔谷漂流田野绿世界金龙洞地下河土耳其小镇天门沟九州驿站树上汤泉千花洲旅游度假区中山泉林欢乐世界千层峰绥江竹海生态旅游景区河源恐龙博物馆东莞海之韵极地海洋公园美的鹭湖半山汤谷正佳极地海洋世界笔架山大瀑布广州荔枝湾游船荔湾湖公园东澳岛蓝骑士水上运动中心百子湖生态乐园汕尾铜鼎山侨鑫生态园中环香港杜莎夫人蜡像馆歇马举人村广东峡天下景区罗南生态园金海湾嘉华度假酒店温泉果盛生态园南昆山国家森林公园珠海岭南大地百草园珠江夜游流溪河国家森林公园正佳自然科学博物馆松山湖动植物趣乐园颐和温泉城快活谷旅游度假区佛山海立方海洋公园广东韶关丹霞山(丹霞地貌命名地)峰林晓镇擎天玻璃桥香溪堡南昆山大观园昆山峡漂流平安山生态旅游风景区千泷沟大瀑布万绿湖镜花缘景区怀集燕山风景区上川岛飞沙滩旅游度假区银盏森林温泉史努比缤纷世界清晖园博物馆石博园港珠澳大桥珠海横琴国家地理探险家中心四会奇石河东莞创艺生态园凌霄阁山顶缆车昂坪360缆车大屿山云顶星河游乐王国从化都喜泰丽度假温泉珠江夜游海心沙西区码头广州钧明欢乐世界广州森林海嬉水乐园广东花海欢乐世界海角城古舟岛三水芦苞温泉度假村美的鹭湖探索王国乐湖水上森林公园观音山王山寺风景区奥园英德巧克力王国古龙峡原生态旅游区梅州客天下景区花都香草世界广州三英温泉度假酒店—天然温泉格林东庄天鹿湖森林公园星斗云儿童体育乐园广州融创大马戏（奇幻秘境）马降龙碉楼群凤仪里碉楼群龙翔谷养生温矿泉泉林黄金小镇帝都温泉北峰山森林国家公园鹤山香草地景区神峰关生态旅游度假区潭岭天湖南丹山森林王国绿湖泡泉美的鹭湖森林度假区岭南和园顺德玛雅海滩水公园梅溪牌坊东澳岛海泉湾梦幻剧场珠海长隆国际海洋度假区珠海海泉湾海洋温泉珠海海泉湾神秘岛X无动力王国飞沙滩万山岛梵高星空艺术馆港珠澳大桥海上游十里莲江九洲港口岸汤臣倍健营养探索馆海泉湾旅游度假区石景山公园湾仔旅游码头珠海长隆横琴湾水世界Pokiddo口袋屋运动梦工场幻山海国潮艺术馆小矮人部落珠海横琴狮门娱乐天地探洞工场珠海印象城店中国紫檀博物馆横琴分馆西游萌宠乐园横琴星乐度·露营小镇乐民游艺园东莞森晖自然博物馆华南mall欢笑天地观音山冰雪世界主题乐园梦幻百花洲军事乐园乐民冰雪世界东莞丰泰花园酒店热矿泉南社明清古村落乐民蜡像馆空气湃运动馆（东莞店）逸颐艺舍博物馆塘厦三正半山温泉酒店国政生态园东江印象园古梅生态农业园东莞海立方环游城飞鸭开心农场5D星空古装婚纱失恋博物馆东莞耕山小寨萌爸客亲子乐园湾区自然学校丛林穿越大岭山印象大山农业园蘑菇精灵乐园香遇百花园棠美术馆AE户外拓展基地东莞人民公园游乐园小山坡亲子农场横岗湖生态园银瓶山探险乐园虎英公园游乐场华南mall宝宝乐园塘厦三正半山温泉酒店玩转星球亲子乐园东莞印象田园大岭山云曦山谷幻视界悬浮玻璃剧场鲤鱼洲遇见童年游乐区传奇英雄科技城澳门上葡京综合度假村澳门观光塔笨猪跳（蹦极跳）影汇之星8字形摩天轮从化生态设计小镇中山鹿鸣湖旭景农业科技园幻彩摩天轮中山逍遥谷中山红博城大象东方蜡像艺术体验馆(悦盈新城店)广骏生态园云梯山花海桐语小镇大盛陶艺松鼠乐园（悦盈新城店）大尖山露营公园中山霖海泉舍温泉雄基果蔬世界蹦床减压公园古董车博物馆香山小镇尚天然温泉旅游度假区惠州HAKKA客家农场林丰温泉嘉宝田养生温泉华家班汽车特技表演鲁冰花童话园富力·养生谷庄园温泉中心三角洲岛顺逸东方白盆湖温泉度假村地派温泉惠州中海汤泉巽寮玩海时代雷公峡生态旅游区巽寮湾三角洲岛俱乐部南昆山川龙峡漂流巽寮湾小海狮潜水俱乐部古石龙休闲度假农场惠州狮子城桑洲岛小星山巽寮湾海之星游艇乐汇途竞技俱乐部巽寮湾老鹰营地巽寮湾帆船出海巽寮湾游艇出海虎形地越野谷俱乐部双月湾红花湖大观园冰雪动漫城茶山樱花谷巽寮湾·海公园水上世界双龙水都旅游度假区巽寮湾龙隐营地罗浮山越野乐园潜豚潜水俱乐部泰丽云顶度假酒店双月湾游船星港码头滨江公园水上乐园赤砂冰雪乐园惠州市惠林温泉浮生六季生态园双月湾海上青年俱乐部九铭屿海ufo无边际泳池南昆山慕思嘉华温泉南昆山竹溪山境温泉白盆珠御汤温泉新作塘花海生态观光园礐石塔山景区黑森林乐园清远花卉庄园清远天子山瀑布徐家庄旅游度假区摩尔花海庄园荣盛农博园牛鱼嘴风景区勤天熹乐谷凤凰温泉熙和湾广东省博物馆宝桑园沙湾古镇宝趣玫瑰世界金叶子温泉珠江夜游西堤码头毅华河畔温泉会所西郊游泳场南沙游艇会东方夏湾拿酒店温泉九龙湖欧式公主小镇珠江夜游省总码头从化碧泉空中温泉美林湖温泉北京路步行街广州香江健康山谷（原锦绣香江温泉城）高滩温泉珠江夜游大沙头码头广州增城大丰门景区大埔围花海卓思道温泉从化五指山景区白水寨嘉华温泉花都志惠梦花海圣托利温泉庄园帷幕开啦（广州塔）蜡像馆白云飞索广州热雪奇迹北迹露营1号广州融创文旅城广州融创体育世界广州欢乐舟主题乐园和营天下北纬23°8′森林营地西和莲花世界咏声动画科技馆永庆坊广州奇幻解压馆广州星空魔幻城（北京路旗舰店）广州都市双层观光巴士亿城泉说温泉猪猪侠小镇—广府新次元西洋记广州独角兽星空艺术馆广州失恋博物馆广州梵高星空艺术馆（时尚天河旗舰店）广州奇思妙想减压馆荔枝球景区世间香境 · 七溪地稻喜湾温泉广州增江画廊游船广州七彩澳游世界香蜜山果庄TaxiWay飞行中心(广州塔店)九龙湖度假区广东温泉宾馆兰苑露天温泉凌志越野俱乐部西汉南越王博物馆绿沃川智慧农业观光园《穿越火线：火线战场》综合主题乐园广州华夏世嘉都市乐园可可乐园广州Sports Monster运动萌兽主题公园番禺南浦思源农庄广州客天下景区广州云岭湖酒店心湖会所粤剧艺术博物馆外婆家度假村广州塔阿尔法探索乐园广州不可思议运动街区荔枝湾涌欢乐谷休闲科教农场欢乐舟·雪糕糕王国幻境空间元宇宙体验馆正佳企鹅冰雪世界沙面艺术中心L.C美术馆富丽湾温泉常州中华恐龙园上海野生动物园灵山胜境鼋头渚淹城野生动物世界瘦西湖常州淹城春秋乐园东方明珠无锡三国城、水浒城横店影视城周庄天目湖南山竹海同里古镇西溪国家湿地公园西塘古镇大连海昌发现王国主题公园故宫博物院（故宫）沙家浜风景区天目湖山水园溱湖国家湿地公园明孝陵黄山风景区杭州西湖风景名胜区上海科技馆花果山镇江金山台儿庄古城千岛湖景区穹窿山尚湖风景区安徽宏村皇城相府南浔古镇拙政园黄鹤楼绍兴古城（鲁迅故里）蓬莱阁景区句容茅山景区大连老虎滩海洋公园秦始皇帝陵博物院（兵马俑）沙坡头白石山风景区留园天目湖御水温泉蜈支洲岛木兰天池鼓浪屿圆明园遗址公园仙都景区（中国黄帝文化名山）碧峰峡风景区乌镇虎丘山风景名胜区崂山禅意小镇拈花湾安徽天堂寨风景区溪口风景区龙虎山风景区九寨沟镇北堡西部影城张家界天门山国家森林公园镇江焦山青城山观光车宁夏沙湖生态旅游区新乡南太行-八里沟景区惠山古镇刘公岛景区桂林象鼻山景区大连金石滩国家旅游度假区崇圣寺三塔云台山风景名胜区太姥山西安大唐芙蓉园环球恐龙城恐龙谷温泉颐和园八达岭长城台州府城（江南长城）青城山索道华山风景名胜区大小洞天芜湖方特梦幻王国沂蒙山旅游区龟蒙景区神仙居南湖景区婺源风景区外秦淮河游船芜湖方特东方神画呀诺达雨林文化旅游区都江堰景区趵突泉（天下第一泉）中国科学院西双版纳热带植物园西递江郎山景区天一阁博物院普达措国家公园老君山景区恭王府天柱山（世界地质公园）沂蒙山云蒙景区（蒙山国家森林公园）明十三陵桂林两江四湖景区古窑民俗博览区华清宫峨眉山恩施大峡谷南京大明王府·瞻园威海华夏城东湖樱花园（武汉磨山樱花园）滕王阁清江画廊山西黄河壶口瀑布旅游区龙口南山旅游景区千山黄果树景区三峡大瀑布绩溪龙川金佛山鸡冠洞黑山谷风景区织金洞风景名胜区武当山风景区云冈石窟镇江北固山慕田峪长城太行大峡谷景区泗洪洪泽湖湿地木兰草原红旗渠青年洞景区殷墟太行山大峡谷夫子庙大成殿碧峰峡野生动物世界明月山宁夏水洞沟旅游区武夷山风景名胜区腾龙洞风景区黄姚古镇三国赤壁古战场棠樾牌坊群鲍家花园本溪水洞贵州龙宫红海滩国家风景廊道龙潭大峡谷龙门石窟大明宫国家遗址公园洪洞大槐树寻根祭祖园盘山风景名胜区普者黑风景区剑门关虞山风景区三清山风景区张家界国家森林公园少林寺普陀山风景区鄂尔多斯响沙湾槟榔谷平遥古城沈阳世博园云阳龙缸国家地质公园杭州动物园九华山野三坡景区独秀峰王城（靖江王府）清东陵呈坎青岩古镇酉阳桃花源邓小平故里德天跨国瀑布景区乐山大佛阆中古城武隆天生三桥采石矶龟峰风景名胜区尧山三峡人家西安碑林博物馆金丝峡景区武功山风景区庐山西海主景区（原柘林湖司马码头）昆明世界园艺博览园万佛湖风景区鸣沙山月牙泉中华麋鹿园寨下大峡谷承德避暑山庄福建洪坑土楼民俗文化村漓江风景名胜区分界洲岛廿八都古镇芒砀山青秀山绵山景区庐山风景名胜区仙女山国家森林公园娲皇宫启园大觉山刘伯温故里（天顶湖游船）广府古城景区嵖岈山浙江天台山旅游风景区神农架国际生态旅游区荔波小七孔景区曲阜三孔张掖七彩丹霞旅游景区大足石刻千岛湖东南湖区景区云丘山景区中国西峡恐龙园崆峒山洛阳白云山风景区大角湾景区玉龙雪山徐州水族展览馆云水谣古镇三河古镇阿尔山国家森林公园石林风景区雁门关天台山石梁飞瀑威海神游海洋世界西安城墙大雁塔白水洋风景区上清溪丹霞山水上丹霞古隆中布达拉宫焦作神农山梵净山稻城亚丁徽州古城黄山唐模四面山三坊七巷净月潭濠河风景区天坛公园木兰云雾山腾冲火山热海旅游区福建高北土楼王景区巫山小三峡南岳衡山风景名胜区成吉思汗陵旅游景区阿斯哈图石林五台山东江湖风景区嘉峪关关城洞庭东山塔尔寺黄龙风景名胜区三仙山风景区开化根宫佛国文化旅游区清明上河园青城山雪窦山景区雁南飞茶田景区雁荡山风景名胜区福建土楼初溪古村落景区（永定土楼）牡丹江镜泊湖风景区九女仙湖丽江古城苏州太湖湖滨国家湿地公园可可托海老界岭旅游度假区清源山伪满皇宫博物院福建泰宁九龙潭田螺坑土楼群大金湖水立方芙蓉洞微山湖旅游区木兰山风景区井冈山风景名胜区神农顶景区南山文化旅游区满洲里国门景区重庆涪陵沙溪温泉滴水洞国清景区横店-秦王宫三百山景区岳阳楼矮寨奇观旅游区-矮寨大桥阿依河景区常德桃花源风景名胜区横店-梦幻谷满洲里口岸套娃景区麦积山安福武功山矮寨奇观旅游区-德夯峡谷长春世界雕塑园黄帝陵毛泽东纪念园屈原故里乌镇西栅山海关天下第一关横店-清明上河图西湖游船横店-明清宫苑岳王庙景区清西陵鸳鸯溪中山陵景区天燕景区天生桥景区喀纳斯景区巴东神农溪天山大峡谷天山天池君山岛大明湖风景区红井景区永定土楼葡萄沟叶坪景区官鹅沟官门山景区大昭寺淹城遗址公园橘子洲神农坛景区荔波大七孔景区孔庙湖南炎帝陵国家级风景名胜区风琴博物馆涠洲岛黄河壶口瀑布旅游区（陕西段）崀山国家级风景区鸡公山风景区天津古文化街横店-梦外滩影视主题公园南靖土楼雅鲁藏布大峡谷景区八里河风景区泽普金湖杨国家森林公园孔林濯水景区蒲花暗河日光岩夫子庙孔府水浒城瑞金共和国摇篮景区西藏林芝巴松措景区洋沙湖旅游景区大九湖江湾景区乌镇东栅十三陵-定陵百里峡仙都小赤壁韶山旅游区长白山菽庄花园河坑土楼群华山北峰索道漠河北极村淮安周恩来纪念馆白帝城·瞿塘峡徐州云龙湖风景名胜区皓月园巴东神农溪纤夫文化走廊交运长江夜游青州古城延安杨家岭革命旧址光雾山洋沙湖渔窑小镇阳朔漓江景区塔河湾·欢乐海岸橘子洲大桥安仁古镇巴音布鲁克大草原橘子洲烟火泰宁风景旅游区炳灵寺世界文化遗产旅游区广府古城墙月河历史街区白沙湖']
    text = ''.join(text)
    getCommentsImage(text)
